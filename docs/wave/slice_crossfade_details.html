<div class="stack" id="fade">
    <h2>フェード処理の詳細</h2>
    <div class="stack">
        <h3>模式図</h3>
        <img src="img/wave_slice_fade0.png"/>
        <ul>
            <li>
                長方形は本来の波形(の長さ)を表します。
            </li>
            <li>
                緑色の縦線はスライスマーカーを表します。
            </li>
        </ul>
    </div>
    <div class="stack">
        <h3>「クロスフェード」が<span class="script">0</span>(無効)の場合</h3>
        <img src="img/wave_slice_fade1.png"/>
        <ul>
            <li>
                各スライスの先頭は「始端無音カット」で指定されたレベルを上回るまでカットされます。
                <ul>
                    <li>
                        <b>スライス1</b>は先頭に無音区間があるため「始端無音カット」が適用されます。
                        <ul>
                            <li>
                                「始端無音カット」の位置は「余白」に応じて前(左)にずらされます。
                            </li>
                        </ul>
                    </li>
                    <li>
                        <b>スライス2</b>は先頭に無音区間が無いため「始端無音カット」は適用されません。
                    </li>
                </ul>
            </li>
            <li>
                各スライスの先頭には「フェードイン」で指定された長さだけフェードインが適用されます。
                <ul>
                    <li>
                        「フェードイン」が<span class="script">0</span>の場合、この区間はなくなります。
                    </li>
                    <li>
                        フェードイン区間には「始端余白」も含まれます。
                    </li>
                </ul>
            </li>
            <li>
                各スライスの末尾は「終端無音カット」で指定されたレベルを下回った時点でカットされます。
                <ul>
                    <li>
                        <b>スライス1</b>は末尾に無音区間が無いため「終端無音カット」は適用されません。
                    </li>
                    <li>
                        <b>スライス2</b>は末尾に無音区間があるため「終端無音カット」が適用されます。
                        <ul>
                            <li>
                                「終端無音カット」の位置は「余白」に応じて後ろ(右)にずらされます。
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li>
                各スライスの末尾には「フェードアウト」で指定された長さだけフェードアウトが適用されます。
                <ul>
                    <li>
                        「フェードアウト」が<span class="script">0</span>の場合、この区間はなくなります。
                    </li>
                    <li>
                        フェードアウト区間には「終端余白」も含まれます。
                    </li>
                </ul>
            </li>
        </ul>
    </div>
    <div class="stack">
        <h3>「クロスフェード」が<span class="script">1</span>以上(有効)の場合</h3>
        <img src="img/wave_slice_fade2.png"/>
        <ul>
            <li>
                <b>スライス1</b>の無音カット及びフェードインの処理は上の図と同じです。
            </li>
            <li>
                <b>スライス1</b>は末尾に無音区間が無いため、<b>クロスフェードが適用されます</b>。
                <ul>
                    <li>
                        <b>スライス1</b>の区間が「クロスフェード」の長さだけ延長され、その部分にフェードアウトが適用されます。
                        <ul>
                            <li>
                                この際、「フェードアウト」の指定は無視されます。
                            </li>
                        </ul>
                    </li>
                    <li>
                        クロスフェードが適用されたため、次の<b>スライス2</b>の先頭にフェードインが適用されます。
                        <ul>
                            <li>
                                フェードイン区間の長さは「クロスフェード」に従います。
                            </li>
                            <li>
                                この際、「フェードイン」の指定は無視されます。
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li>
                <b>スライス2</b>は末尾に無音区間があるため「終端無音カット」が適用されます。
                <ul>
                    <li>
                        次のマーカーに音声があったとしても、<b>スライス2</b>に対してクロスフェードは<b>適用されません</b>。
                    </li>
                    <li>
                        「フェードアウト」で指定された長さだけフェードアウトが適用されます。
                    </li>
                </ul>
            </li>
            <li>
                クロスフェードにより、いわゆる「ぶつ切り」をした際に生じるプチプチというノイズが抑制されます。
            </li>
        </ul>
    </div>
    <div class="stack">
        <h3>「傾斜」の影響</h3>
        <img src="img/wave_slice_fade_factor.png"/>傾斜ごとのフェードアウト曲線のイメージ(フェードインの場合は左右が反転する)
        <ul>
            <li>
                「傾斜」はフェード関数の指数を指定するオプションです。
            </li>
            <li>
                フェードインの場合、大まかにいうと:
                <ul>
                    <li>
                        数値が大きいと、<b>前半はゆるやかに増大</b>し、<b>後半になるほど増大は急激</b>になります。
                    </li>
                    <li>
                        数値が小さいと、<b>前半は急速に増大</b>し、<b>後半になるほど増大はゆるやか</b>になります。
                    </li>
                </ul>
            </li>
            <li>
                フェードアウトの場合、大まかにいうと:
                <ul>
                    <li>
                        数値が大きいと、<b>前半で急速に減衰</b>し、<b>後半になるほど減衰はゆるやか</b>になります。
                    </li>
                    <li>
                        数値が小さいと、<b>前半はゆるやかに減衰</b>し、<b>後半になるほど減衰は急激</b>になります。
                    </li>
                </ul>
            </li>
            <li>
                フェード関数は以下のように表されます。<br>
                <div class="script">
                    fadein: fi(x) = f(x) * x^k<br>
                    fadeout: fo(x) = f(x) * (1-x)^k
                </div>
                ここで各表現の意味は:
                <ul>
                    <li>
                        <span class="script">f(x)</span>: 元々の波形
                    </li>
                    <li>
                        <span class="script">x</span>: フェードを処理する位置(<span class="script">0</span>以上<span class="script">1</span>以下の相対位置)
                    </li>
                    <li>
                        <span class="script">k</span>: 「傾斜」の値
                    </li>
                    <li>
                        <span class="script">a*b</span>: <span class="script">a</span>と<span class="script">b</span>の積
                    </li>
                    <li>
                        <span class="script">a^b</span>: <span class="script">a</span>の<span class="script">b</span>乗
                    </li>
                </ul>
            </li>
            <li>
                傾斜の値を<span class="script">n</span>倍すると、その傾斜のフェードを<b><span class="script">n</span>回重ねがけした</b>のと同じ状態になります。
            </li>
        </ul>
    </div>
</div>